{"ast":null,"code":"var _jsxFileName = \"/Users/bensmith/workspace/projects/crossword-league/react/src/views/League/LeaguePage.jsx\";\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { Link, Redirect, useParams } from 'react-router-dom';\nimport { Button } from '@material-ui/core';\nimport { H1, H2, ScrollBox, ButtonContainer } from '../../Util/ViewUtil';\nimport StandardText from '../../components/shared/StandardText';\nimport AddMemberModal from '../Modals/AddMemberModal';\nimport AddScoreModal from '../Modals/AddScoreModal';\nimport useQuery from '../../components/Hooks/useQuery';\nimport Card from '../../components/shared/Card';\nimport { formatIgnoreTimeZone, getAllDatesWithScore, scoreComparator } from '../../Util/Util';\nimport ScoreTable from './ScoreTable';\nimport { ThinBorder } from '../../Util/ViewUtil';\nimport DeleteLeagueModal from '../Modals/DeleteLeagueModal';\nimport { compareAsc, parseISO, isSameWeek, isSameMonth } from 'date-fns';\n\nconst LeaguePage = () => {\n  const [redirect, setRedirect] = React.useState(false);\n  const [isMemberModalShowing, setIsMemberModalShowing] = React.useState(false);\n  const [isScoreModalShowing, setIsScoreModalShowing] = React.useState(false);\n  const [isDeleteModalShowing, setIsDeleteModalShowing] = React.useState(false);\n  let {\n    id\n  } = useParams();\n  const {\n    data,\n    loading,\n    error,\n    reQuery\n  } = useQuery(`/leagues/${id}`);\n  console.log(data);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(H2, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }\n    }, \"Loading\");\n  }\n\n  if (redirect) return /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathName: '/',\n      state: {\n        refresh: true\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 26\n    }\n  });\n  const comparator = data && scoreComparator(data.scoreDirectionUp, data.scoreType);\n  const dateMap = data && getAllDatesWithScore(data, comparator);\n  const dates = data && Array.from(dateMap.keys()).sort((a, b) => compareAsc(new Date(b), new Date(a)));\n  console.log(dateMap);\n  console.log(dates);\n  const today = new Date();\n  const weekWins = {};\n  const monthWins = {};\n  const allTimeWins = {};\n\n  if (dates && dateMap) {\n    //initialize maps\n    for (const user of data.leagueUsers) {\n      weekWins[user.id] = 0;\n      monthWins[user.id] = 0;\n      allTimeWins[user.id] = 0;\n    }\n\n    for (const date of dates) {\n      let winner = false;\n      let bestScore = false;\n\n      for (const user of data.leagueUsers) {\n        if (dateMap.get(date).has(user.id) && (!bestScore || comparator(dateMap.get(date).get(user.id).value, bestScore) > 0)) {\n          console.log(\"adsfasdfasdf\");\n          winner = user.id;\n          bestScore = dateMap.get(date).get(user.id).value;\n        }\n      }\n\n      if (isSameWeek(today, parseISO(date))) {\n        weekWins[winner]++;\n      }\n\n      if (isSameMonth(today, parseISO(date))) {\n        monthWins[winner]++;\n      }\n\n      allTimeWins[winner]++;\n    }\n  }\n\n  console.log(allTimeWins);\n  console.log(weekWins);\n  console.log(monthWins);\n  return data && /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AddMemberModal, {\n    open: isMemberModalShowing,\n    onSave: () => {\n      reQuery();\n    },\n    handleClose: () => setIsMemberModalShowing(false),\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AddScoreModal, {\n    league: data,\n    open: isScoreModalShowing,\n    onSave: () => {\n      reQuery();\n    },\n    handleClose: () => setIsScoreModalShowing(false),\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DeleteLeagueModal, {\n    handleClose: () => setIsDeleteModalShowing(false),\n    open: isDeleteModalShowing,\n    league: data,\n    onDelete: () => setRedirect(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(HeaderContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(H1, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, data.name), /*#__PURE__*/React.createElement(StandardText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, data.leagueUsers.length, \" Members \\u2022 Created \", formatIgnoreTimeZone(parseISO(data.createdAt), 'MMM d, yyyy'), \" \")), /*#__PURE__*/React.createElement(ThinBorder, {\n    margin: \"8px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ScoreTable, {\n    league: data,\n    dateMap: dateMap,\n    dates: dates,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(RowContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ButtonContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    variant: \"contained\",\n    onClick: () => {\n      setIsMemberModalShowing(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(StandardText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, \"+ Add Member\"))), /*#__PURE__*/React.createElement(ButtonContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    variant: \"contained\",\n    onClick: () => {\n      setIsScoreModalShowing(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(StandardText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, \"+ Add score\")))), /*#__PURE__*/React.createElement(ButtonContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    fullWidth: true,\n    variant: \"contained\",\n    onClick: () => {\n      setIsDeleteModalShowing(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StandardText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"Delete League\"))));\n};\n\nexport default LeaguePage;\nconst Container = styled.div`\n\n`;\nconst HeaderContainer = styled.div`\n    display: flex;\n    height: 50px;\n    justify-content: space-between;\n    flex-direction: column;\n    padding: 16px;\n    padding-bottom: 8px;\n`;\nconst RowContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n`;","map":{"version":3,"sources":["/Users/bensmith/workspace/projects/crossword-league/react/src/views/League/LeaguePage.jsx"],"names":["React","styled","Link","Redirect","useParams","Button","H1","H2","ScrollBox","ButtonContainer","StandardText","AddMemberModal","AddScoreModal","useQuery","Card","formatIgnoreTimeZone","getAllDatesWithScore","scoreComparator","ScoreTable","ThinBorder","DeleteLeagueModal","compareAsc","parseISO","isSameWeek","isSameMonth","LeaguePage","redirect","setRedirect","useState","isMemberModalShowing","setIsMemberModalShowing","isScoreModalShowing","setIsScoreModalShowing","isDeleteModalShowing","setIsDeleteModalShowing","id","data","loading","error","reQuery","console","log","pathName","state","refresh","comparator","scoreDirectionUp","scoreType","dateMap","dates","Array","from","keys","sort","a","b","Date","today","weekWins","monthWins","allTimeWins","user","leagueUsers","date","winner","bestScore","get","has","value","name","length","createdAt","Container","div","HeaderContainer","RowContainer"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\nimport { Link, Redirect, useParams } from 'react-router-dom';\nimport { Button } from '@material-ui/core';\nimport { H1, H2, ScrollBox, ButtonContainer } from '../../Util/ViewUtil';\nimport StandardText from '../../components/shared/StandardText';\nimport AddMemberModal from '../Modals/AddMemberModal';\nimport AddScoreModal from '../Modals/AddScoreModal';\nimport useQuery from '../../components/Hooks/useQuery';\nimport Card from '../../components/shared/Card';\nimport {formatIgnoreTimeZone, getAllDatesWithScore, scoreComparator } from '../../Util/Util';\nimport ScoreTable from './ScoreTable';\nimport {ThinBorder} from '../../Util/ViewUtil';\nimport DeleteLeagueModal from '../Modals/DeleteLeagueModal';\nimport { compareAsc, parseISO, isSameWeek, isSameMonth } from 'date-fns';\n\nconst LeaguePage = () => {\n\n    const [redirect, setRedirect] = React.useState(false);\n    const [isMemberModalShowing, setIsMemberModalShowing] = React.useState(false);\n    const [isScoreModalShowing, setIsScoreModalShowing] = React.useState(false);\n    const [isDeleteModalShowing, setIsDeleteModalShowing] = React.useState(false);\n    let { id } = useParams();\n    const {data, loading, error, reQuery} = useQuery(`/leagues/${id}`);\n\n    console.log(data);\n    if (loading) {\n        return (<H2>Loading</H2>);\n    }\n    if (redirect) return <Redirect to={{pathName: '/', state: {refresh: true}}}/>;\n\n    const comparator = data && scoreComparator(data.scoreDirectionUp, data.scoreType);\n    const dateMap = data && getAllDatesWithScore(data, comparator);\n    const dates = data && Array.from(dateMap.keys()).sort((a, b) => compareAsc(new Date(b), new Date(a)));\n    console.log(dateMap)\n    console.log(dates)\n    const today = new Date();\n    const weekWins = {};\n    const monthWins = {};\n    const allTimeWins = {};\n    if (dates && dateMap) {\n        //initialize maps\n        for (const user of data.leagueUsers) {\n            weekWins[user.id] = 0;\n            monthWins[user.id] = 0;\n            allTimeWins[user.id] = 0;\n        }\n\n        for (const date of dates) {\n                let winner = false; \n                let bestScore = false;\n            for (const user of data.leagueUsers) {\n                if ( dateMap.get(date).has(user.id) && (!bestScore || (comparator(dateMap.get(date).get(user.id).value, bestScore) > 0))) {\n                    \n                    console.log(\"adsfasdfasdf\")\n                    winner = user.id;\n                    bestScore = dateMap.get(date).get(user.id).value;\n                }\n            }\n            if (isSameWeek(today, parseISO(date))) {\n                weekWins[winner]++;\n            }\n            if (isSameMonth(today, parseISO(date))) {\n                monthWins[winner]++;\n            }\n            allTimeWins[winner]++;\n        }\n    }\n    console.log(allTimeWins);\n    console.log(weekWins);\n    console.log(monthWins);\n    return (\n        data && \n        <Container>\n            <AddMemberModal open={isMemberModalShowing} onSave={() => {reQuery()}} handleClose={() => setIsMemberModalShowing(false)} id={id}/>\n            <AddScoreModal league={data} open={isScoreModalShowing} onSave={() => {reQuery()}} handleClose={() => setIsScoreModalShowing(false)} id={id}/>\n            <DeleteLeagueModal handleClose={() => setIsDeleteModalShowing(false)} open={isDeleteModalShowing} league={data} onDelete={() => setRedirect(true)}/> \n            <HeaderContainer>\n                <H1>{data.name}</H1>\n                <StandardText>{data.leagueUsers.length} Members â€¢ Created {formatIgnoreTimeZone(parseISO(data.createdAt), 'MMM d, yyyy')} </StandardText>\n            </HeaderContainer>\n            <ThinBorder margin='8px'/>\n            <ScoreTable league={data} dateMap={dateMap} dates={dates}/>\n            <RowContainer>\n                <ButtonContainer>\n                    <Button fullWidth variant='contained' onClick={() => {setIsMemberModalShowing(true)}}>\n                        <StandardText>+ Add Member</StandardText>\n                    </Button>\n                </ButtonContainer>\n                <ButtonContainer>\n                    <Button fullWidth variant='contained' onClick={() => {setIsScoreModalShowing(true)}}>\n                        <StandardText>+ Add score</StandardText>\n                    </Button>\n                </ButtonContainer>\n            </RowContainer>\n            <ButtonContainer>\n                <Button color='secondary' fullWidth variant='contained' onClick={() => {setIsDeleteModalShowing(true)}}>\n                    <StandardText>Delete League</StandardText>\n                </Button>\n            </ButtonContainer>\n        </Container>\n\n    )\n}\n\nexport default LeaguePage;\n\nconst Container = styled.div`\n\n`;\n\nconst HeaderContainer = styled.div`\n    display: flex;\n    height: 50px;\n    justify-content: space-between;\n    flex-direction: column;\n    padding: 16px;\n    padding-bottom: 8px;\n`\nconst RowContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n`;"]},"metadata":{},"sourceType":"module"}